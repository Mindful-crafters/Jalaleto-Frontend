<nav class="navbar">
  <div class="navbar-content">
    <div class="navbar-brand">
      <a href="#" class="navbar-logo">جلالتو</a>
    </div>

    <span>
      <ul class="navbar-menu-right">
        <li><a routerLink="/" href="./dashboard">خانه</a></li>
        <li><a routerLink="/services">تبدیل تاریخ</a></li>
        <li><a routerLink="/services">اوقات شرعی</a></li>
        <li><a routerLink="/services">دسترسی سریع</a></li>
        <li><a routerLink="/groups">گروه ها</a></li>
      </ul>
    </span>

    <span class="spacer"></span>

    <button
      nz-popover
      nzTitle="Notifications"
      nzTrigger="click"
      [nzPopoverContent]="notificationContent"
      class="notification-button"
      nzPlacement="bottomRight"
      (click)="hideRedCircle = true"
    >
      <div class="notification" id="notification">
        <div class="notification-icon">
          <span class="red-circle" [hidden]="hideRedCircle"></span>
          <img
            src="../../assets/icons/notification-image.svg"
            alt="Notification Icon"
          />
        </div>
      </div>
    </button>

    <ng-template #notificationContent>
      <div *ngIf="notifications.length > 0; else noNotifications">
        <ul>
          <li class="notif-dot" *ngFor="let notification of notifications">
            <div class="notification-details">
              <div class="notif-title">
                <div class="notification-icon">
                  <img [src]="notification.icon" alt="Notification Icon" />
                </div>

                <a class="title-link" [routerLink]="notification.link">{{
                  notification.title
                }}</a>
              </div>

              <span class="notif-description">{{
                notification.description
              }}</span>
            </div>
            <div class="notif_line"></div>
          </li>
        </ul>
      </div>
      <ng-template #noNotifications>
        <p>اعلان خوانده‌نشده ندارید</p>
      </ng-template>
    </ng-template>

    <button
      [disabled]="!isLoggedIn"
      mat-icon-button
      [matMenuTriggerFor]="menu"
      class="profile-button"
    >
      <div class="profile-icon">
        <img src="../../assets/icons/profile2.png" alt="Profile Icon" />
      </div>
    </button>

    <mat-menu #menu="matMenu" class="menu">
      <ng-template matMenuContent>
        <div class="profile-info" *ngIf="userInfoLoaded">
          <img
            [src]="
              userProfile.imagePath == ''
                ? '../../assets/icons/icons8-test-account-48.png'
                : userProfile.imagePath
            "
            alt="Profile Image"
            class="profile-image"
          />
          <div class="user-details">
            <span class="username">{{ userProfile?.userName }}</span>
            <span class="email">{{ userProfile?.email }}</span>
          </div>
        </div>

        <button mat-menu-item (click)="viewProfile()">مشاهده پروفایل</button>
        <div class="line"></div>
        <button mat-menu-item (click)="openSettings()">تنظیمات</button>
        <div class="line"></div>
        <button mat-menu-item (click)="Events()">رویدادها</button>
        <div class="line"></div>
        <button mat-menu-item (click)="logout()" class="logout-button">
          خروج
        </button>
      </ng-template>
    </mat-menu>
  </div>
</nav>

<div class="separator-line"></div>
